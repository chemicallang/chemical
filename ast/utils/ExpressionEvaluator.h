// Copyright (c) Qinetik 2024.

//
// Created by Waqas Tahir on 05/03/2024.
//

#pragma once

#include <unordered_map>
#include <functional>
#include "ast/base/Value.h"
#include "Operation.h"

class ExpressionEvaluator {
public:

    static std::unordered_map<int, std::function<Value*(Value *, Value *)>> functionVector;

    static inline int index(ValueType vt, ValueType vt2, Operation op) {
        return ((uint8_t) vt << 20) | ((uint8_t) vt2 << 10) | (uint8_t) op;
    }

    static constexpr int compute(ValueType vt, ValueType vt2, Operation op);

    static constexpr int computeIntToInt(Operation op);

    static constexpr int computeIntToFloat(Operation op);

    static constexpr int computeFloatToInt(Operation op);

    static constexpr int computeBoolToBool(Operation op);

    static constexpr int computeCharToChar(Operation op);

    static constexpr int computeStrToStr(Operation op);

    static constexpr int computeFloatToFloat(Operation op);

    static constexpr int computeDoubleToDouble(Operation op);

    static void prepareFunctions();

};

//    (int + int)
//    (int - int)
//    (int * int)
//    (int / int)
//    (int % int)
//    (int == int)
//    (int != int)
//    (int < int)
//    (int <= int)
//    (int > int)
//    (int >= int)
//    (int << int)
//    (int >> int)
//    (int ++ int)
//    (int -- int)
//    (int & int)
//    (int | int)
//    (int ^ int)
//    (int + float)
//    (int - float)
//    (int * float)
//    (int / float)
//    (int % float)
//    (int == float)
//    (int != float)
//    (int < float)
//    (int <= float)
//    (int > float)
//    (int >= float)
//    (int << float)
//    (int >> float)
//    (int ++ float)
//    (int -- float)
//    (int & float)
//    (int | float)
//    (int ^ float)
//    (int + bool)
//    (int - bool)
//    (int * bool)
//    (int / bool)
//    (int % bool)
//    (int == bool)
//    (int != bool)
//    (int < bool)
//    (int <= bool)
//    (int > bool)
//    (int >= bool)
//    (int << bool)
//    (int >> bool)
//    (int ++ bool)
//    (int -- bool)
//    (int & bool)
//    (int | bool)
//    (int ^ bool)
//    (int + char)
//    (int - char)
//    (int * char)
//    (int / char)
//    (int % char)
//    (int == char)
//    (int != char)
//    (int < char)
//    (int <= char)
//    (int > char)
//    (int >= char)
//    (int << char)
//    (int >> char)
//    (int ++ char)
//    (int -- char)
//    (int & char)
//    (int | char)
//    (int ^ char)
//    (int + string)
//    (int - string)
//    (int * string)
//    (int / string)
//    (int % string)
//    (int == string)
//    (int != string)
//    (int < string)
//    (int <= string)
//    (int > string)
//    (int >= string)
//    (int << string)
//    (int >> string)
//    (int ++ string)
//    (int -- string)
//    (int & string)
//    (int | string)
//    (int ^ string)
//    (int + unknown)
//    (int - unknown)
//    (int * unknown)
//    (int / unknown)
//    (int % unknown)
//    (int == unknown)
//    (int != unknown)
//    (int < unknown)
//    (int <= unknown)
//    (int > unknown)
//    (int >= unknown)
//    (int << unknown)
//    (int >> unknown)
//    (int ++ unknown)
//    (int -- unknown)
//    (int & unknown)
//    (int | unknown)
//    (int ^ unknown)
//    (float + int)
//    (float - int)
//    (float * int)
//    (float / int)
//    (float % int)
//    (float == int)
//    (float != int)
//    (float < int)
//    (float <= int)
//    (float > int)
//    (float >= int)
//    (float << int)
//    (float >> int)
//    (float ++ int)
//    (float -- int)
//    (float & int)
//    (float | int)
//    (float ^ int)
//    (float + float)
//    (float - float)
//    (float * float)
//    (float / float)
//    (float % float)
//    (float == float)
//    (float != float)
//    (float < float)
//    (float <= float)
//    (float > float)
//    (float >= float)
//    (float << float)
//    (float >> float)
//    (float ++ float)
//    (float -- float)
//    (float & float)
//    (float | float)
//    (float ^ float)
//    (float + bool)
//    (float - bool)
//    (float * bool)
//    (float / bool)
//    (float % bool)
//    (float == bool)
//    (float != bool)
//    (float < bool)
//    (float <= bool)
//    (float > bool)
//    (float >= bool)
//    (float << bool)
//    (float >> bool)
//    (float ++ bool)
//    (float -- bool)
//    (float & bool)
//    (float | bool)
//    (float ^ bool)
//    (float + char)
//    (float - char)
//    (float * char)
//    (float / char)
//    (float % char)
//    (float == char)
//    (float != char)
//    (float < char)
//    (float <= char)
//    (float > char)
//    (float >= char)
//    (float << char)
//    (float >> char)
//    (float ++ char)
//    (float -- char)
//    (float & char)
//    (float | char)
//    (float ^ char)
//    (float + string)
//    (float - string)
//    (float * string)
//    (float / string)
//    (float % string)
//    (float == string)
//    (float != string)
//    (float < string)
//    (float <= string)
//    (float > string)
//    (float >= string)
//    (float << string)
//    (float >> string)
//    (float ++ string)
//    (float -- string)
//    (float & string)
//    (float | string)
//    (float ^ string)
//    (float + unknown)
//    (float - unknown)
//    (float * unknown)
//    (float / unknown)
//    (float % unknown)
//    (float == unknown)
//    (float != unknown)
//    (float < unknown)
//    (float <= unknown)
//    (float > unknown)
//    (float >= unknown)
//    (float << unknown)
//    (float >> unknown)
//    (float ++ unknown)
//    (float -- unknown)
//    (float & unknown)
//    (float | unknown)
//    (float ^ unknown)
//    (bool + int)
//    (bool - int)
//    (bool * int)
//    (bool / int)
//    (bool % int)
//    (bool == int)
//    (bool != int)
//    (bool < int)
//    (bool <= int)
//    (bool > int)
//    (bool >= int)
//    (bool << int)
//    (bool >> int)
//    (bool ++ int)
//    (bool -- int)
//    (bool & int)
//    (bool | int)
//    (bool ^ int)
//    (bool + float)
//    (bool - float)
//    (bool * float)
//    (bool / float)
//    (bool % float)
//    (bool == float)
//    (bool != float)
//    (bool < float)
//    (bool <= float)
//    (bool > float)
//    (bool >= float)
//    (bool << float)
//    (bool >> float)
//    (bool ++ float)
//    (bool -- float)
//    (bool & float)
//    (bool | float)
//    (bool ^ float)
//    (bool + bool)
//    (bool - bool)
//    (bool * bool)
//    (bool / bool)
//    (bool % bool)
//    (bool == bool)
//    (bool != bool)
//    (bool < bool)
//    (bool <= bool)
//    (bool > bool)
//    (bool >= bool)
//    (bool << bool)
//    (bool >> bool)
//    (bool ++ bool)
//    (bool -- bool)
//    (bool & bool)
//    (bool | bool)
//    (bool ^ bool)
//    (bool + char)
//    (bool - char)
//    (bool * char)
//    (bool / char)
//    (bool % char)
//    (bool == char)
//    (bool != char)
//    (bool < char)
//    (bool <= char)
//    (bool > char)
//    (bool >= char)
//    (bool << char)
//    (bool >> char)
//    (bool ++ char)
//    (bool -- char)
//    (bool & char)
//    (bool | char)
//    (bool ^ char)
//    (bool + string)
//    (bool - string)
//    (bool * string)
//    (bool / string)
//    (bool % string)
//    (bool == string)
//    (bool != string)
//    (bool < string)
//    (bool <= string)
//    (bool > string)
//    (bool >= string)
//    (bool << string)
//    (bool >> string)
//    (bool ++ string)
//    (bool -- string)
//    (bool & string)
//    (bool | string)
//    (bool ^ string)
//    (bool + unknown)
//    (bool - unknown)
//    (bool * unknown)
//    (bool / unknown)
//    (bool % unknown)
//    (bool == unknown)
//    (bool != unknown)
//    (bool < unknown)
//    (bool <= unknown)
//    (bool > unknown)
//    (bool >= unknown)
//    (bool << unknown)
//    (bool >> unknown)
//    (bool ++ unknown)
//    (bool -- unknown)
//    (bool & unknown)
//    (bool | unknown)
//    (bool ^ unknown)
//    (char + int)
//    (char - int)
//    (char * int)
//    (char / int)
//    (char % int)
//    (char == int)
//    (char != int)
//    (char < int)
//    (char <= int)
//    (char > int)
//    (char >= int)
//    (char << int)
//    (char >> int)
//    (char ++ int)
//    (char -- int)
//    (char & int)
//    (char | int)
//    (char ^ int)
//    (char + float)
//    (char - float)
//    (char * float)
//    (char / float)
//    (char % float)
//    (char == float)
//    (char != float)
//    (char < float)
//    (char <= float)
//    (char > float)
//    (char >= float)
//    (char << float)
//    (char >> float)
//    (char ++ float)
//    (char -- float)
//    (char & float)
//    (char | float)
//    (char ^ float)
//    (char + bool)
//    (char - bool)
//    (char * bool)
//    (char / bool)
//    (char % bool)
//    (char == bool)
//    (char != bool)
//    (char < bool)
//    (char <= bool)
//    (char > bool)
//    (char >= bool)
//    (char << bool)
//    (char >> bool)
//    (char ++ bool)
//    (char -- bool)
//    (char & bool)
//    (char | bool)
//    (char ^ bool)
//    (char + char)
//    (char - char)
//    (char * char)
//    (char / char)
//    (char % char)
//    (char == char)
//    (char != char)
//    (char < char)
//    (char <= char)
//    (char > char)
//    (char >= char)
//    (char << char)
//    (char >> char)
//    (char ++ char)
//    (char -- char)
//    (char & char)
//    (char | char)
//    (char ^ char)
//    (char + string)
//    (char - string)
//    (char * string)
//    (char / string)
//    (char % string)
//    (char == string)
//    (char != string)
//    (char < string)
//    (char <= string)
//    (char > string)
//    (char >= string)
//    (char << string)
//    (char >> string)
//    (char ++ string)
//    (char -- string)
//    (char & string)
//    (char | string)
//    (char ^ string)
//    (char + unknown)
//    (char - unknown)
//    (char * unknown)
//    (char / unknown)
//    (char % unknown)
//    (char == unknown)
//    (char != unknown)
//    (char < unknown)
//    (char <= unknown)
//    (char > unknown)
//    (char >= unknown)
//    (char << unknown)
//    (char >> unknown)
//    (char ++ unknown)
//    (char -- unknown)
//    (char & unknown)
//    (char | unknown)
//    (char ^ unknown)
//    (string + int)
//    (string - int)
//    (string * int)
//    (string / int)
//    (string % int)
//    (string == int)
//    (string != int)
//    (string < int)
//    (string <= int)
//    (string > int)
//    (string >= int)
//    (string << int)
//    (string >> int)
//    (string ++ int)
//    (string -- int)
//    (string & int)
//    (string | int)
//    (string ^ int)
//    (string + float)
//    (string - float)
//    (string * float)
//    (string / float)
//    (string % float)
//    (string == float)
//    (string != float)
//    (string < float)
//    (string <= float)
//    (string > float)
//    (string >= float)
//    (string << float)
//    (string >> float)
//    (string ++ float)
//    (string -- float)
//    (string & float)
//    (string | float)
//    (string ^ float)
//    (string + bool)
//    (string - bool)
//    (string * bool)
//    (string / bool)
//    (string % bool)
//    (string == bool)
//    (string != bool)
//    (string < bool)
//    (string <= bool)
//    (string > bool)
//    (string >= bool)
//    (string << bool)
//    (string >> bool)
//    (string ++ bool)
//    (string -- bool)
//    (string & bool)
//    (string | bool)
//    (string ^ bool)
//    (string + char)
//    (string - char)
//    (string * char)
//    (string / char)
//    (string % char)
//    (string == char)
//    (string != char)
//    (string < char)
//    (string <= char)
//    (string > char)
//    (string >= char)
//    (string << char)
//    (string >> char)
//    (string ++ char)
//    (string -- char)
//    (string & char)
//    (string | char)
//    (string ^ char)
//    (string + string)
//    (string - string)
//    (string * string)
//    (string / string)
//    (string % string)
//    (string == string)
//    (string != string)
//    (string < string)
//    (string <= string)
//    (string > string)
//    (string >= string)
//    (string << string)
//    (string >> string)
//    (string ++ string)
//    (string -- string)
//    (string & string)
//    (string | string)
//    (string ^ string)
//    (string + unknown)
//    (string - unknown)
//    (string * unknown)
//    (string / unknown)
//    (string % unknown)
//    (string == unknown)
//    (string != unknown)
//    (string < unknown)
//    (string <= unknown)
//    (string > unknown)
//    (string >= unknown)
//    (string << unknown)
//    (string >> unknown)
//    (string ++ unknown)
//    (string -- unknown)
//    (string & unknown)
//    (string | unknown)
//    (string ^ unknown)
//    (unknown + int)
//    (unknown - int)
//    (unknown * int)
//    (unknown / int)
//    (unknown % int)
//    (unknown == int)
//    (unknown != int)
//    (unknown < int)
//    (unknown <= int)
//    (unknown > int)
//    (unknown >= int)
//    (unknown << int)
//    (unknown >> int)
//    (unknown ++ int)
//    (unknown -- int)
//    (unknown & int)
//    (unknown | int)
//    (unknown ^ int)
//    (unknown + float)
//    (unknown - float)
//    (unknown * float)
//    (unknown / float)
//    (unknown % float)
//    (unknown == float)
//    (unknown != float)
//    (unknown < float)
//    (unknown <= float)
//    (unknown > float)
//    (unknown >= float)
//    (unknown << float)
//    (unknown >> float)
//    (unknown ++ float)
//    (unknown -- float)
//    (unknown & float)
//    (unknown | float)
//    (unknown ^ float)
//    (unknown + bool)
//    (unknown - bool)
//    (unknown * bool)
//    (unknown / bool)
//    (unknown % bool)
//    (unknown == bool)
//    (unknown != bool)
//    (unknown < bool)
//    (unknown <= bool)
//    (unknown > bool)
//    (unknown >= bool)
//    (unknown << bool)
//    (unknown >> bool)
//    (unknown ++ bool)
//    (unknown -- bool)
//    (unknown & bool)
//    (unknown | bool)
//    (unknown ^ bool)
//    (unknown + char)
//    (unknown - char)
//    (unknown * char)
//    (unknown / char)
//    (unknown % char)
//    (unknown == char)
//    (unknown != char)
//    (unknown < char)
//    (unknown <= char)
//    (unknown > char)
//    (unknown >= char)
//    (unknown << char)
//    (unknown >> char)
//    (unknown ++ char)
//    (unknown -- char)
//    (unknown & char)
//    (unknown | char)
//    (unknown ^ char)
//    (unknown + string)
//    (unknown - string)
//    (unknown * string)
//    (unknown / string)
//    (unknown % string)
//    (unknown == string)
//    (unknown != string)
//    (unknown < string)
//    (unknown <= string)
//    (unknown > string)
//    (unknown >= string)
//    (unknown << string)
//    (unknown >> string)
//    (unknown ++ string)
//    (unknown -- string)
//    (unknown & string)
//    (unknown | string)
//    (unknown ^ string)
//    (unknown + unknown)
//    (unknown - unknown)
//    (unknown * unknown)
//    (unknown / unknown)
//    (unknown % unknown)
//    (unknown == unknown)
//    (unknown != unknown)
//    (unknown < unknown)
//    (unknown <= unknown)
//    (unknown > unknown)
//    (unknown >= unknown)
//    (unknown << unknown)
//    (unknown >> unknown)
//    (unknown ++ unknown)
//    (unknown -- unknown)
//    (unknown & unknown)
//    (unknown | unknown)
//    (unknown ^ unknown)